{"version":3,"file":"static/webpack/static/development/pages/cp/random/add.js.6718a1f4f1e9e61c2a8f.hot-update.js","sources":["webpack:///./pages/cp/random/add.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport Admin from '../../../components/layouts/admin'\nimport Axios from 'axios';\nimport Router from 'next/router';\n\nimport { Select, Spin } from 'antd';\nimport debounce from 'lodash/debounce';\n\n\nconst { Option } = Select;\n\n\n\nclass add extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n\n\n            //add\n            inputR: [],\n            postList: []\n\n        };\n    }\n\n    componentDidMount() {\n\n        Axios.get('/api/list-posts-random')\n            .then(response => {\n                this.setState({\n                    postList: response.data.data\n                })\n            })\n            .catch(err => {\n                console.log(err)\n            })\n\n    }\n\n\n\n\n\n    handleInputChange = (e, index) => {\n        console.log(e)\n        this.state.inputR[index] = e;\n        this.setState({ inputR: this.state.inputR })\n    }\n\n    handleRemove(index) {\n        this.state.inputR.splice(index, 1);\n        this.setState({ inputR: this.state.inputR })\n        console.log(this.state.inputR);\n    }\n\n    addInput = () => {\n        this.setState({\n            inputR: [...this.state.inputR, '']\n        })\n    }\n\n    submit(e) {\n        e.preventDefault();\n        console.log(this.state.inputR);\n\n        let data = {\n            posts: this.state.inputR,\n            tag: this.tag.value\n        }\n        console.log(data);\n        Axios.post('/api/create-random', data)\n            .then(result => {\n                console.log(result)\n                if (result.data.data == 'success') {\n                    Router.push('/random/list');\n                }\n            })\n            .catch(err => {\n                console.log(err)\n            })\n    }\n\n\n    render() {\n\n        let { posts } = this.state;\n        const { fetching, data, value } = this.state;\n\n        return (\n            <Admin>\n                <div>\n                    <form onSubmit={e => this.submit(e)}>\n                        <div className=\"form-group\">\n                            <label >Random Tag</label>\n                            <select ref={input => this.tag = input} className=\"form-control\" >\n                                <option value=\"\">Select Tag</option>\n                                <option value=\"CatDog\">Cat and Dog</option>\n                                <option value=\"Meme\">Meme</option>\n                            </select>\n                        </div>\n                        <button type=\"button\" className=\"btn btn-primary\" onClick={this.addInput}>add more</button>\n                        {\n                            this.state.inputR.map((post, index) => {\n                                return (\n                                    <div key={index}>\n                                        <Select\n                                            showSearch\n                                            style={{ width: 200 }}\n                                            placeholder=\"Select a person\"\n                                            optionFilterProp=\"children\"\n                                            value={post}\n                                            onChange={e => this.handleInputChange(e, index)}\n                                            /*        onChange={onChange}\n                                                   onFocus={onFocus}\n                                                   onBlur={onBlur}\n                                                   onSearch={onSearch} */\n                                            filterOption={(input, option) =>\n                                                option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                                            }\n                                        >\n                                            {\n                                                this.state.postList.map(el => {\n                                                    return <Option key={el.id} value={el.id}>{el.title}</Option>\n                                                })\n                                            }\n                                        </Select>\n                                        <button type=\"button\" onClick={() => this.handleRemove(index)} > remove</button>\n                                    </div>\n                                )\n                            })\n                        }\n\n                        <div className=\"form-group\">\n                            <button type=\"submit\" className=\"btn btn-block btn-info\">Add to Random</button>\n                        </div>\n                    </form>\n                </div>\n\n            </Admin>\n        );\n    }\n}\n\nexport default add;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AAGA;AACA;AAGA;;;;;AAEA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAgCA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AApCA;AA4CA;AACA;AADA;AAGA;AACA;AA7CA;AAGA;AACA;AACA;AALA;AAHA;AAWA;AACA;;;AACA;AAAA;AACA;AACA;AAEA;AACA;AADA;AAGA;AAEA;AACA;AAEA;;;AAYA;AACA;AACA;AAAA;AAAA;AACA;AACA;;;AAQA;AACA;AACA;AAEA;AACA;AACA;AAFA;AAIA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;;;AAGA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAKA;AAGA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAGA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;;;;AAPA;AAWA;AAAA;AAAA;AAXA;AAiBA;AAAA;AAAA;AAAA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AAGA;AAGA;AAAA;AACA;AAAA;AAAA;AAOA;;;;AAlIA;AACA;AAoIA;;;;A","sourceRoot":""}